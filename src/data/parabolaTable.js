// Parabola Calculation Table Data
// Based on the official Parabola Chart for 50 over, 30 over, and 20 over matches
// Keys: Overs (20-50). Values: Array of 6 numbers [Norm, Ball1, Ball2, Ball3, Ball4, Ball5]
// Note: Ball 0 is the Norm for the full over.

// 50 Over Match Format
export const parabola50Table = {
    20: [126, 126, 127, 128, 129, 130],
    21: [131, 131, 132, 133, 134, 135],
    22: [136, 136, 137, 138, 139, 140],
    23: [140, 141, 142, 143, 143, 144],
    24: [145, 146, 147, 147, 148, 149],
    25: [150, 150, 151, 152, 153, 153],
    26: [154, 155, 156, 156, 157, 158],
    27: [158, 159, 160, 161, 161, 162],
    28: [163, 163, 164, 165, 165, 166],
    29: [167, 167, 168, 169, 169, 170],
    30: [171, 171, 172, 173, 173, 174],
    31: [175, 175, 176, 176, 177, 178],
    32: [178, 179, 179, 180, 181, 181],
    33: [182, 182, 183, 184, 184, 185],
    34: [185, 186, 187, 187, 188, 188],
    35: [189, 189, 190, 190, 191, 192],
    36: [192, 193, 193, 194, 194, 195],
    37: [195, 196, 196, 197, 197, 198],
    38: [198, 199, 199, 200, 200, 201],
    39: [201, 202, 202, 203, 203, 204],
    40: [204, 204, 205, 205, 206, 206],
    41: [207, 207, 208, 208, 208, 209],
    42: [209, 210, 210, 210, 211, 211],
    43: [212, 212, 212, 213, 213, 214],
    44: [214, 214, 215, 215, 215, 216],
    45: [216, 217, 217, 217, 218, 218],
    46: [218, 219, 219, 219, 220, 220],
    47: [220, 221, 221, 221, 221, 222],
    48: [222, 222, 223, 223, 223, 224],
    49: [224, 224, 224, 225, 225, 225],
    50: [225, 225, 225, 225, 225, 225]
};

// 30 Over Match Format
export const parabola30Table = {
    20: [126, 126, 127, 128, 129, 130],
    21: [131, 131, 132, 133, 134, 135],
    22: [136, 136, 137, 138, 139, 140],
    23: [140, 141, 142, 143, 143, 144],
    24: [145, 146, 147, 147, 148, 149],
    25: [150, 150, 151, 152, 153, 153],
    26: [154, 155, 156, 156, 157, 158],
    27: [158, 159, 160, 161, 161, 162],
    28: [163, 163, 164, 165, 165, 166],
    29: [167, 167, 168, 169, 169, 170],
    30: [171, 171, 172, 173, 173, 174]
};

// 20 Over Match Format
export const parabola20Table = {
    5: [46, 47, 49, 50, 52, 53],
    6: [55, 56, 58, 59, 60, 62],
    7: [63, 65, 66, 68, 69, 70],
    8: [72, 73, 74, 76, 77, 78],
    9: [80, 81, 82, 84, 85, 86],
    10: [88, 89, 90, 91, 92, 93],
    11: [94, 95, 96, 98, 99, 100],
    12: [101, 102, 103, 104, 105, 106],
    13: [107, 108, 109, 110, 111, 112],
    14: [113, 114, 115, 116, 117, 118],
    15: [119, 120, 120, 121, 122, 123],
    16: [123, 124, 125, 126, 126, 127],
    17: [128, 128, 129, 130, 130, 131],
    18: [132, 132, 133, 134, 134, 135],
    19: [136, 136, 137, 138, 139, 139],
    20: [140, 140, 140, 140, 140, 140]
};

// Default table (backward compatibility)
export const parabolaTable = parabola50Table;

export const getParabolaNorm = (overs, balls = 0, format = 50) => {
    // Select the appropriate table based on format
    let table;
    let minOvers, maxOvers;
    
    if (format === 50) {
        table = parabola50Table;
        minOvers = 20;
        maxOvers = 50;
    } else if (format === 30) {
        table = parabola30Table;
        minOvers = 20;
        maxOvers = 30;
    } else if (format === 20) {
        table = parabola20Table;
        minOvers = 5;
        maxOvers = 20;
    } else {
        return 0; // Invalid format
    }

    // Handle edge cases
    if (overs < minOvers) return 0;
    if (overs > maxOvers) return table[maxOvers][0];

    const row = table[overs];
    if (!row) return 0;

    // balls should be 0-5
    if (balls < 0) balls = 0;
    if (balls > 5) balls = 5;

    return row[balls];
};
